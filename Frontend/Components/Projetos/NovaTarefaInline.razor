--- NovaTarefaInline.razor ---
@using Frontend.DTOs.Tarefas
@inject Frontend.Services.TarefaService TarefaService

<MudDialog FullWidth MaxWidth="MaxWidth.Small" @bind-IsVisible="_open">
    <DialogContent>
        <MudTextField Label="Descrição" @bind-Value="Descricao" FullWidth />
        <MudTextField Label="Responsável (ID)" @bind-Value="Responsavel" FullWidth />
        <MudTextField Label="Preço/hora (opcional)" @bind-Value="PrecoHora" FullWidth Variant="Variant.Text" Adornment="Adornment.End" AdornmentText="€" />
    </DialogContent>
    <DialogActions>
        <MudButton Color="Color.Primary" OnClick="Criar">Criar</MudButton>
        <MudButton OnClick="Fechar">Cancelar</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [Parameter] public int ProjetoId { get; set; }
    [Parameter] public decimal? PrecoProjeto { get; set; }
    [Parameter] public EventCallback OnCreated { get; set; }

    private string Descricao = string.Empty;
    private int Responsavel;
    private decimal? PrecoHora;
    private bool _open;

    public void Open() => _open = true;
    private void Fechar() => _open = false;

    private async Task Criar()
    {
        var dto = new StartTarefaDto
        {
            Descricao = Descricao,
            Responsavel = Responsavel,
            ProjetoId = ProjetoId,
            PrecoHora = PrecoHora ?? PrecoProjeto
        };

        await TarefaService.StartAsync(dto);
        await OnCreated.InvokeAsync();
        Fechar();
    }
}